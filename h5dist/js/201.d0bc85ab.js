"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[201],{"6349":function(t,e,a){a.d(e,{"By":function(){return r},"Fo":function(){return o},"N$":function(){return getUntokenDrugs},"nQ":function(){return l},"ys":function(){return getFutureDrugs}});var i=a(885),n=a(3144),u=a(5671),o=(0,n.Z)((function DrugInfo(t,e,a,i,n){(0,u.Z)(this,DrugInfo),this.time=t,this.name=e,this.use=a,this.func=i,this.otc=n})),r=function(){return(0,n.Z)((function DrugData(t,e,a,i,n,o,r,l,s){(0,u.Z)(this,DrugData),this.id=t,this.drugName=e,this.dosage=a,this.form=i,this.dose=n,this.interval=o,this.time=r,this.startDate=l,this.stopDate=s}),null,[{"key":"findWithID","value":function findWithID(t,e){return t.find((function(t){return t.id===e}))}}])}(),l=function(){function DrugRecord(t,e,a,i,n,o,r,l){(0,u.Z)(this,DrugRecord),this.id=t,this.drugName=e,this.dosage=a,this.form=i,this.dose=n,this.date=o,this.time=r,this.skip=l,this.skip=!1}return(0,n.Z)(DrugRecord,null,[{"key":"getTime","value":function getTime(t){return new Date(t.date+"T"+t.time).getTime()}},{"key":"compareByDateTime","value":function compareByDateTime(t,e){var a=DrugRecord.getTime(t),i=DrugRecord.getTime(e);return a<i?-1:a>i?1:0}}])}();function getDHMS(t){var e=new Date(t);return[e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0"),String(e.getHours()).padStart(2,"0"),String(e.getMinutes()).padStart(2,"0"),String(e.getSeconds()).padStart(2,"0")]}function toStamp(t){var e=t.split(":"),a=(0,i.Z)(e,3),n=a[0],u=a[1],o=a[2];return 1e3*(3600*Number(n)+60*Number(u)+Number(o))}function toTimeStamp(t,e){return new Date(t+"T"+e).getTime()}function getUntokenDrugs(t,e){var a=(new Date).getTime(),n=[],u=[],o={};return e.forEach((function(t){o[t.id]||(o[t.id]=[]),o[t.id].push(t)})),t.forEach((function(t){var e=toTimeStamp(t.startDate,t.time),r=toTimeStamp(t.stopDate,"24:00:00"),s=toStamp(t.interval);if(e<=a&&a<=r){var d=e;if(o[t.id]){var c=o[t.id].slice(-1)[0];d=toTimeStamp(c.date,c.time)}for(;d<=a;){var m=getDHMS(d+=s),g=(0,i.Z)(m,4),f=g[0],h=g[1],v=g[2],p=g[3];n.push(new l(t.id,t.drugName,t.dosage,t.form,t.dose,f,"".concat(h,":").concat(v,":").concat(p),!1))}var w=n.pop();null!=w&&u.push(w)}})),n.sort(l.compareByDateTime),u.sort(l.compareByDateTime),[n,u[0]]}function getFutureDrugs(t,e,a,n){var u=[],o={};return e.forEach((function(t){o[t.id]||(o[t.id]=[]),o[t.id].push(t)})),t.forEach((function(t){var e=toTimeStamp(t.startDate,t.time),r=toTimeStamp(t.stopDate,"24:00:00"),s=toStamp(t.interval);if(e<=a&&a<=r){var d=e;if(o[t.id]){var c=o[t.id].slice(-1)[0];d=toTimeStamp(c.date,c.time)}var m=Math.ceil((a-d)/s);if(m>0)for(var g=d+m*s;g<=n;){var f=getDHMS(g),h=(0,i.Z)(f,4),v=h[0],p=h[1],w=h[2],D=h[3];u.push(new l(t.id,t.drugName,t.dosage,t.form,t.dose,v,"".concat(p,":").concat(w,":").concat(D),!1)),g+=s}}})),u.sort(l.compareByDateTime),u}},"9830":function(t,e,a){a.d(e,{"p":function(){return setGlobalData},"r":function(){return getGlobalData}});var i=a(2667),n=a(6349),u={"box_id":"","MQTTurl":"i7148e41.ala.us-east-1.emqxsl.com","tabList":[{"url":"/pages/homePage/home","title":"首页","iconType":"home"},{"url":"/pages/statisticsPage/statistics","title":"统计","iconType":"bullet-list"},{"url":"/pages/chatPage/chat","title":"问AI","iconType":"message"},{"url":"/pages/selfPage/self","title":"我的","iconType":"user","max":99}],"userInfo":{"isLogin":!0,"account":"","password":"","avatar":"https://img2.baidu.com/it/u=18303046,1217185652&fm=253&fmt=auto&app=138&f=JPEG?w=502&h=500","nickName":"小马哥","urgentPhone":""},"patients":[new i.Z("小明",66,"男","19434636375","https://b0.bdstatic.com/0df6c8c7f109aa7b67e7cb15e6f8d025.jpg@h_1280","子女","高血压","否","暂无","良好",170,60,100,99,100,70,"胰岛素增敏剂"),new i.Z("老明",90,"男","19436563675","https://b0.bdstatic.com/0df6c8c7f109aa7b67e7cb15e6f8d025.jpg@h_1280","子孙","糖尿病","否","暂无","良好",162,52,100,99,100,73,"胰岛素增敏剂")],"drugStock":[new n.Fo("1721804283","毛果芸香碱滴眼液","一次1滴，一日1～4次","慢性青光眼、闭角型青光眼",!1),new n.Fo("1721804283","布洛芬胶囊","一次1粒，一日3～4次","缓解类风湿关节炎和骨关节炎、解热镇痛",!0)],"drugRecord":[new n.nQ("1720656002","毛果芸香碱","1","滴","滴眼","2024-08-13","00:00:00",!1),new n.nQ("1720656001","山莨菪碱","2","片","口服","2024-08-13","02:30:00",!1),new n.nQ("1720656003","阿托品","2","片","口服","2024-08-13","06:30:00",!1),new n.nQ("1720656000","阿司匹林","1","片","口服","2024-08-13","08:00:00",!1),new n.nQ("1720656004","胰岛素","1","滴","静脉注射","2024-08-13","08:00:00",!1)],"drugs":[new n.By("1720656000","阿司匹林","1","片","口服","12:00:00","08:00:00","2024-07-20","2024-10-10"),new n.By("1720656001","山莨菪碱","2","片","口服","10:30:00","10:00:00","2024-07-19","2024-10-10"),new n.By("1720656002","毛果芸香碱","1","滴","滴眼","16:00:00","08:00:00","2024-07-18","2024-10-10"),new n.By("1720656003","阿托品","2","片","口服","13:30:00","08:00:00","2024-07-21","2024-10-10"),new n.By("1720656004","胰岛素","1","滴","静脉注射","24:00:00","08:00:00","2024-07-19","2024-10-10")],"healthIndicators":{"heightData":[{"date":"2024-10-01","time":"08:00:00","value":170}],"bloodPressureData":[{"date":"2024-10-01","time":"08:00:00","high":110,"low":80},{"date":"2024-10-02","time":"08:00:00","high":112,"low":80},{"date":"2024-10-03","time":"08:00:00","high":115,"low":82},{"date":"2024-10-04","time":"08:00:00","high":113,"low":81},{"date":"2024-10-05","time":"08:00:00","high":110,"low":79},{"date":"2024-10-06","time":"08:00:00","high":108,"low":75},{"date":"2024-10-07","time":"08:00:00","high":109,"low":73},{"date":"2024-10-08","time":"08:00:00","high":110,"low":72},{"date":"2024-10-09","time":"08:00:00","high":111,"low":70},{"date":"2024-10-10","time":"08:00:00","high":112,"low":71}],"weightData":[{"date":"2024-10-01","time":"08:00:00","value":65},{"date":"2024-10-02","time":"08:00:00","value":64},{"date":"2024-10-03","time":"08:00:00","value":65},{"date":"2024-10-04","time":"08:00:00","value":64},{"date":"2024-10-05","time":"08:00:00","value":65},{"date":"2024-10-06","time":"08:00:00","value":65},{"date":"2024-10-07","time":"08:00:00","value":66},{"date":"2024-10-08","time":"08:00:00","value":67},{"date":"2024-10-09","time":"08:00:00","value":68},{"date":"2024-10-10","time":"08:00:00","value":69},{"date":"2024-10-11","time":"08:00:00","value":69},{"date":"2024-10-12","time":"08:00:00","value":68},{"date":"2024-10-13","time":"08:00:00","value":68}],"heartRateData":[{"date":"2024-10-01","time":"08:00:00","value":70},{"date":"2024-10-02","time":"08:00:00","value":69},{"date":"2024-10-03","time":"08:00:00","value":70},{"date":"2024-10-04","time":"08:00:00","value":71},{"date":"2024-10-05","time":"08:00:00","value":70},{"date":"2024-10-06","time":"08:00:00","value":70},{"date":"2024-10-07","time":"08:00:00","value":69},{"date":"2024-10-08","time":"08:00:00","value":70},{"date":"2024-10-09","time":"08:00:00","value":71},{"date":"2024-10-10","time":"08:00:00","value":72},{"date":"2024-10-11","time":"08:00:00","value":73},{"date":"2024-10-12","time":"08:00:00","value":74},{"date":"2024-10-13","time":"08:00:00","value":72}],"bloodOxygenData":[{"date":"2024-10-01","time":"08:00:00","value":98},{"date":"2024-10-02","time":"08:00:00","value":98},{"date":"2024-10-03","time":"08:00:00","value":99},{"date":"2024-10-04","time":"08:00:00","value":98},{"date":"2024-10-05","time":"08:00:00","value":98},{"date":"2024-10-06","time":"08:00:00","value":99},{"date":"2024-10-07","time":"08:00:00","value":98},{"date":"2024-10-08","time":"08:00:00","value":98},{"date":"2024-10-09","time":"08:00:00","value":99},{"date":"2024-10-10","time":"08:00:00","value":98},{"date":"2024-10-11","time":"08:00:00","value":98},{"date":"2024-10-12","time":"08:00:00","value":97},{"date":"2024-10-13","time":"08:00:00","value":98}],"bloodGlucoseData":[{"date":"2024-10-01","time":"08:00:00","value":6.5},{"date":"2024-10-02","time":"08:00:00","value":6.4},{"date":"2024-10-03","time":"08:00:00","value":6.3},{"date":"2024-10-04","time":"08:00:00","value":6.4},{"date":"2024-10-05","time":"08:00:00","value":6.4},{"date":"2024-10-06","time":"08:00:00","value":6.5},{"date":"2024-10-07","time":"08:00:00","value":6.6},{"date":"2024-10-08","time":"08:00:00","value":6.7},{"date":"2024-10-09","time":"08:00:00","value":6.7},{"date":"2024-10-10","time":"08:00:00","value":6.7},{"date":"2024-10-11","time":"08:00:00","value":6.9},{"date":"2024-10-12","time":"08:00:00","value":6.8},{"date":"2024-10-13","time":"08:00:00","value":6.8}]}};function setGlobalData(t,e){u[t]=e}function getGlobalData(t){return u[t]}},"2667":function(t,e,a){a.d(e,{"Z":function(){return u}});var i=a(3144),n=a(5671),u=(0,i.Z)((function PatientInfo(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"男",i=arguments.length>3?arguments[3]:void 0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"https://b0.bdstatic.com/0df6c8c7f109aa7b67e7cb15e6f8d025.jpg@h_1280",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"其他",r=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"否",s=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0,f=arguments.length>13?arguments[13]:void 0,h=arguments.length>14?arguments[14]:void 0,v=arguments.length>15?arguments[15]:void 0,p=arguments.length>16?arguments[16]:void 0;(0,n.Z)(this,PatientInfo),this.name=t,this.age=e,this.gender=a,this.phone=i,this.avatar=u,this.relation=o,this.illness=r,this.liveAlone=l,this.eatingHabit=s,this.bodyHealth=d,this.height=c,this.weight=m,this.BP=g,this.BF=f,this.BG=h,this.HR=v,this.drug=p}))},"7823":function(t,e,a){a.r(e),a.d(e,{"default":function(){return g}});var i=a(6252),n=a(2262),u=a(3577),o=a.p+"static/images/images/icons/啥也没有.svg",r=a(7945),l=a(8595),s=a(9830),d=a.p+"static/images/images/icons/OTC.svg",c=a.p+"static/images/images/icons/Rx.svg",m={"name":"manageDrugPage"};var g=Object.assign(m,{"setup":function setup(t){var e=this,a=(0,n.qj)({"drugs":(0,n.iH)((0,s.r)("drugs")),"drugStock":(0,n.iH)((0,s.r)("drugStock")),"options":[{"text":"编辑","style":{"backgroundColor":"#6190E8"}},{"text":"删除","style":{"backgroundColor":"#FF4949"}}]});function onConfirm(){r.ZP.navigateBack()}function onClickSwipe(t,e){if(console.log(t,e),"删除"===e.text)(0,l.K4)({"title":"提示","content":"是否确认删除该药物？","confirmText":"确定","success":function success(e){e.confirm&&a.drugs.splice(t,1)}});else if("编辑"===e.text)return void r.ZP.navigateTo({"url":"../editDrugPage/editDrug?index=".concat(t)})}return function(t,r){var l=(0,i.up)("View"),s=(0,i.up)("AtListItem"),m=(0,i.up)("AtSwipeAction"),g=(0,i.up)("AtList"),f=(0,i.up)("taro-image"),h=(0,i.up)("Text"),v=(0,i.up)("AtCard"),p=(0,i.up)("AtButton"),w=(0,i.up)("taro-scroll-view");return(0,i.wg)(),(0,i.j4)(w,{"class":"root-managedrug","scroll-y":""},{"default":(0,i.w5)((function(){return[(0,i.Wm)(l,{"class":"headline"},{"default":(0,i.w5)((function(){return[(0,i.Uk)(" 药物管理 ")]})),"_":1}),(0,i.Wm)(l,{"class":"panel"},{"default":(0,i.w5)((function(){return[(0,i.Wm)(l,{"class":"panel-title"},{"default":(0,i.w5)((function(){return[(0,i.Uk)("服药计划")]})),"_":1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,n.SU)(a).drugs,(function(t,u){return(0,i.wg)(),(0,i.j4)(g,{"key":u},{"default":(0,i.w5)((function(){return[(0,i.Wm)(m,{"autoClose":"","options":(0,n.SU)(a).options,"onClick":onClickSwipe.bind(e,u)},{"default":(0,i.w5)((function(){return[(0,i.Wm)(s,{"hasBorder":"","class":"normal","title":t.drugName,"extraText":"".concat(t.dosage," ").concat(t.form," ").concat(t.dose)},null,8,["title","extraText"])]})),"_":2},1032,["options","onClick"])]})),"_":2},1024)})),128))]})),"_":1}),(0,i.Wm)(l,{"class":"panel"},{"default":(0,i.w5)((function(){return[(0,i.Wm)(l,{"class":"panel-title"},{"default":(0,i.w5)((function(){return[(0,i.Uk)("库存药物")]})),"_":1}),0===(0,n.SU)(a).drugStock.length?((0,i.wg)(),(0,i.j4)(l,{"key":0,"class":"empty"},{"default":(0,i.w5)((function(){return[(0,i.Wm)(f,{"class":"empty-img","src":o}),(0,i.Wm)(l,{"class":"empty-text"},{"default":(0,i.w5)((function(){return[(0,i.Uk)("药盒还没有库存哦～")]})),"_":1})]})),"_":1})):((0,i.wg)(),(0,i.j4)(l,{"key":1},{"default":(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,n.SU)(a).drugStock,(function(t,e){return(0,i.wg)(),(0,i.j4)(v,{"key":e,"title":t.name,"thumb":t.otc?(0,n.SU)(d):(0,n.SU)(c),"extra":(a=1e3*Number(t.time),new Date(a).toLocaleDateString()+"存入")},{"default":(0,i.w5)((function(){return[(0,i.Wm)(l,null,{"default":(0,i.w5)((function(){return[(0,i.Wm)(h,{"class":"bold-text"},{"default":(0,i.w5)((function(){return[(0,i.Uk)("用法用量")]})),"_":1}),(0,i.Uk)(" ："+(0,u.zw)(t.use),1)]})),"_":2},1024),(0,i.Wm)(l,null,{"default":(0,i.w5)((function(){return[(0,i.Wm)(h,{"class":"bold-text"},{"default":(0,i.w5)((function(){return[(0,i.Uk)("功能主治")]})),"_":1}),(0,i.Uk)(" ："+(0,u.zw)(t.func),1)]})),"_":2},1024)]})),"_":2},1032,["title","thumb","extra"]);var a})),128))]})),"_":1}))]})),"_":1}),(0,i.Wm)(p,{"class":"save-btn","type":"primary","size":"normal","onClick":onConfirm},{"default":(0,i.w5)((function(){return[(0,i.Uk)(" 确定 ")]})),"_":1})]})),"_":1})}}})}}]);