"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[705],{"6349":function(e,t,a){a.d(t,{"By":function(){return o},"Fo":function(){return u},"N$":function(){return getUntokenDrugs},"nQ":function(){return l},"ys":function(){return getFutureDrugs}});var n=a(885),i=a(3144),r=a(5671),u=(0,i.Z)((function DrugInfo(e,t,a,n,i){(0,r.Z)(this,DrugInfo),this.time=e,this.name=t,this.use=a,this.func=n,this.otc=i})),o=function(){return(0,i.Z)((function DrugData(e,t,a,n,i,u,o,l,d){(0,r.Z)(this,DrugData),this.id=e,this.drugName=t,this.dosage=a,this.form=n,this.dose=i,this.interval=u,this.time=o,this.startDate=l,this.stopDate=d}),null,[{"key":"findWithID","value":function findWithID(e,t){return e.find((function(e){return e.id===t}))}}])}(),l=function(){function DrugRecord(e,t,a,n,i,u,o,l){(0,r.Z)(this,DrugRecord),this.id=e,this.drugName=t,this.dosage=a,this.form=n,this.dose=i,this.date=u,this.time=o,this.skip=l,this.skip=!1}return(0,i.Z)(DrugRecord,null,[{"key":"getTime","value":function getTime(e){return new Date(e.date+"T"+e.time).getTime()}},{"key":"compareByDateTime","value":function compareByDateTime(e,t){var a=DrugRecord.getTime(e),n=DrugRecord.getTime(t);return a<n?-1:a>n?1:0}}])}();function getDHMS(e){var t=new Date(e);return[t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"),String(t.getHours()).padStart(2,"0"),String(t.getMinutes()).padStart(2,"0"),String(t.getSeconds()).padStart(2,"0")]}function toStamp(e){var t=e.split(":"),a=(0,n.Z)(t,3),i=a[0],r=a[1],u=a[2];return 1e3*(3600*Number(i)+60*Number(r)+Number(u))}function toTimeStamp(e,t){return new Date(e+"T"+t).getTime()}function getUntokenDrugs(e,t){var a=(new Date).getTime(),i=[],r=[],u={};return t.forEach((function(e){u[e.id]||(u[e.id]=[]),u[e.id].push(e)})),e.forEach((function(e){var t=toTimeStamp(e.startDate,e.time),o=toTimeStamp(e.stopDate,"24:00:00"),d=toStamp(e.interval);if(t<=a&&a<=o){var c=t;if(u[e.id]){var s=u[e.id].slice(-1)[0];c=toTimeStamp(s.date,s.time)}for(;c<=a;){var m=getDHMS(c+=d),g=(0,n.Z)(m,4),h=g[0],v=g[1],f=g[2],p=g[3];i.push(new l(e.id,e.drugName,e.dosage,e.form,e.dose,h,"".concat(v,":").concat(f,":").concat(p),!1))}var S=i.pop();null!=S&&r.push(S)}})),i.sort(l.compareByDateTime),r.sort(l.compareByDateTime),[i,r[0]]}function getFutureDrugs(e,t,a,i){var r=[],u={};return t.forEach((function(e){u[e.id]||(u[e.id]=[]),u[e.id].push(e)})),e.forEach((function(e){var t=toTimeStamp(e.startDate,e.time),o=toTimeStamp(e.stopDate,"24:00:00"),d=toStamp(e.interval);if(t<=a&&a<=o){var c=t;if(u[e.id]){var s=u[e.id].slice(-1)[0];c=toTimeStamp(s.date,s.time)}var m=Math.ceil((a-c)/d);if(m>0)for(var g=c+m*d;g<=i;){var h=getDHMS(g),v=(0,n.Z)(h,4),f=v[0],p=v[1],S=v[2],D=v[3];r.push(new l(e.id,e.drugName,e.dosage,e.form,e.dose,f,"".concat(p,":").concat(S,":").concat(D),!1)),g+=d}}})),r.sort(l.compareByDateTime),r}},"9830":function(e,t,a){a.d(t,{"p":function(){return setGlobalData},"r":function(){return getGlobalData}});var n=a(2667),i=a(6349),r={"box_id":"","MQTTurl":"i7148e41.ala.us-east-1.emqxsl.com","tabList":[{"url":"/pages/homePage/home","title":"首页","iconType":"home"},{"url":"/pages/statisticsPage/statistics","title":"统计","iconType":"bullet-list"},{"url":"/pages/chatPage/chat","title":"问AI","iconType":"message"},{"url":"/pages/selfPage/self","title":"我的","iconType":"user","max":99}],"userInfo":{"isLogin":!0,"account":"","password":"","avatar":"https://img2.baidu.com/it/u=18303046,1217185652&fm=253&fmt=auto&app=138&f=JPEG?w=502&h=500","nickName":"小马哥","urgentPhone":""},"patients":[new n.Z("小明",66,"男","19434636375","https://b0.bdstatic.com/0df6c8c7f109aa7b67e7cb15e6f8d025.jpg@h_1280","子女","高血压","否","暂无","良好",170,60,100,99,100,70,"胰岛素增敏剂"),new n.Z("老明",90,"男","19436563675","https://b0.bdstatic.com/0df6c8c7f109aa7b67e7cb15e6f8d025.jpg@h_1280","子孙","糖尿病","否","暂无","良好",162,52,100,99,100,73,"胰岛素增敏剂")],"drugStock":[new i.Fo("1721804283","毛果芸香碱滴眼液","一次1滴，一日1～4次","慢性青光眼、闭角型青光眼",!1),new i.Fo("1721804283","布洛芬胶囊","一次1粒，一日3～4次","缓解类风湿关节炎和骨关节炎、解热镇痛",!0)],"drugRecord":[new i.nQ("1720656002","毛果芸香碱","1","滴","滴眼","2024-08-13","00:00:00",!1),new i.nQ("1720656001","山莨菪碱","2","片","口服","2024-08-13","02:30:00",!1),new i.nQ("1720656003","阿托品","2","片","口服","2024-08-13","06:30:00",!1),new i.nQ("1720656000","阿司匹林","1","片","口服","2024-08-13","08:00:00",!1),new i.nQ("1720656004","胰岛素","1","滴","静脉注射","2024-08-13","08:00:00",!1)],"drugs":[new i.By("1720656000","阿司匹林","1","片","口服","12:00:00","08:00:00","2024-07-20","2024-10-10"),new i.By("1720656001","山莨菪碱","2","片","口服","10:30:00","10:00:00","2024-07-19","2024-10-10"),new i.By("1720656002","毛果芸香碱","1","滴","滴眼","16:00:00","08:00:00","2024-07-18","2024-10-10"),new i.By("1720656003","阿托品","2","片","口服","13:30:00","08:00:00","2024-07-21","2024-10-10"),new i.By("1720656004","胰岛素","1","滴","静脉注射","24:00:00","08:00:00","2024-07-19","2024-10-10")],"healthIndicators":{"heightData":[{"date":"2024-10-01","time":"08:00:00","value":170}],"bloodPressureData":[{"date":"2024-10-01","time":"08:00:00","high":110,"low":80},{"date":"2024-10-02","time":"08:00:00","high":112,"low":80},{"date":"2024-10-03","time":"08:00:00","high":115,"low":82},{"date":"2024-10-04","time":"08:00:00","high":113,"low":81},{"date":"2024-10-05","time":"08:00:00","high":110,"low":79},{"date":"2024-10-06","time":"08:00:00","high":108,"low":75},{"date":"2024-10-07","time":"08:00:00","high":109,"low":73},{"date":"2024-10-08","time":"08:00:00","high":110,"low":72},{"date":"2024-10-09","time":"08:00:00","high":111,"low":70},{"date":"2024-10-10","time":"08:00:00","high":112,"low":71}],"weightData":[{"date":"2024-10-01","time":"08:00:00","value":65},{"date":"2024-10-02","time":"08:00:00","value":64},{"date":"2024-10-03","time":"08:00:00","value":65},{"date":"2024-10-04","time":"08:00:00","value":64},{"date":"2024-10-05","time":"08:00:00","value":65},{"date":"2024-10-06","time":"08:00:00","value":65},{"date":"2024-10-07","time":"08:00:00","value":66},{"date":"2024-10-08","time":"08:00:00","value":67},{"date":"2024-10-09","time":"08:00:00","value":68},{"date":"2024-10-10","time":"08:00:00","value":69},{"date":"2024-10-11","time":"08:00:00","value":69},{"date":"2024-10-12","time":"08:00:00","value":68},{"date":"2024-10-13","time":"08:00:00","value":68}],"heartRateData":[{"date":"2024-10-01","time":"08:00:00","value":70},{"date":"2024-10-02","time":"08:00:00","value":69},{"date":"2024-10-03","time":"08:00:00","value":70},{"date":"2024-10-04","time":"08:00:00","value":71},{"date":"2024-10-05","time":"08:00:00","value":70},{"date":"2024-10-06","time":"08:00:00","value":70},{"date":"2024-10-07","time":"08:00:00","value":69},{"date":"2024-10-08","time":"08:00:00","value":70},{"date":"2024-10-09","time":"08:00:00","value":71},{"date":"2024-10-10","time":"08:00:00","value":72},{"date":"2024-10-11","time":"08:00:00","value":73},{"date":"2024-10-12","time":"08:00:00","value":74},{"date":"2024-10-13","time":"08:00:00","value":72}],"bloodOxygenData":[{"date":"2024-10-01","time":"08:00:00","value":98},{"date":"2024-10-02","time":"08:00:00","value":98},{"date":"2024-10-03","time":"08:00:00","value":99},{"date":"2024-10-04","time":"08:00:00","value":98},{"date":"2024-10-05","time":"08:00:00","value":98},{"date":"2024-10-06","time":"08:00:00","value":99},{"date":"2024-10-07","time":"08:00:00","value":98},{"date":"2024-10-08","time":"08:00:00","value":98},{"date":"2024-10-09","time":"08:00:00","value":99},{"date":"2024-10-10","time":"08:00:00","value":98},{"date":"2024-10-11","time":"08:00:00","value":98},{"date":"2024-10-12","time":"08:00:00","value":97},{"date":"2024-10-13","time":"08:00:00","value":98}],"bloodGlucoseData":[{"date":"2024-10-01","time":"08:00:00","value":6.5},{"date":"2024-10-02","time":"08:00:00","value":6.4},{"date":"2024-10-03","time":"08:00:00","value":6.3},{"date":"2024-10-04","time":"08:00:00","value":6.4},{"date":"2024-10-05","time":"08:00:00","value":6.4},{"date":"2024-10-06","time":"08:00:00","value":6.5},{"date":"2024-10-07","time":"08:00:00","value":6.6},{"date":"2024-10-08","time":"08:00:00","value":6.7},{"date":"2024-10-09","time":"08:00:00","value":6.7},{"date":"2024-10-10","time":"08:00:00","value":6.7},{"date":"2024-10-11","time":"08:00:00","value":6.9},{"date":"2024-10-12","time":"08:00:00","value":6.8},{"date":"2024-10-13","time":"08:00:00","value":6.8}]}};function setGlobalData(e,t){r[e]=t}function getGlobalData(e){return r[e]}},"6898":function(e,t,a){a.d(t,{"$M":function(){return genRandStr},"MR":function(){return switchTab},"Td":function(){return getCurrTime},"V5":function(){return getCurrDate},"_3":function(){return getDate},"hK":function(){return getTime}});var n=a(7945),i=a(9830);function getTime(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(e),n=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0"),r=String(a.getSeconds()).padStart(2,"0");return t?"".concat(n,":").concat(i,":").concat(r):"".concat(n,":").concat(i)}function getDate(e){var t=new Date(e);return t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")}function getCurrTime(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Date,a=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return e?"".concat(a,":").concat(n,":").concat(i):"".concat(a,":").concat(n)}function getCurrDate(){var e=new Date;return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}function switchTab(e){var t=(0,i.r)("tabList");n.ZP.switchTab({"url":t[e].url})}function genRandStr(e){for(var t="",a=0;a<e;a++)t+=String.fromCharCode(Math.floor(26*Math.random())+97);return t}},"2667":function(e,t,a){a.d(t,{"Z":function(){return r}});var n=a(3144),i=a(5671),r=(0,n.Z)((function PatientInfo(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"男",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"https://b0.bdstatic.com/0df6c8c7f109aa7b67e7cb15e6f8d025.jpg@h_1280",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"其他",o=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"否",d=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,s=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0,h=arguments.length>13?arguments[13]:void 0,v=arguments.length>14?arguments[14]:void 0,f=arguments.length>15?arguments[15]:void 0,p=arguments.length>16?arguments[16]:void 0;(0,i.Z)(this,PatientInfo),this.name=e,this.age=t,this.gender=a,this.phone=n,this.avatar=r,this.relation=u,this.illness=o,this.liveAlone=l,this.eatingHabit=d,this.bodyHealth=c,this.height=s,this.weight=m,this.BP=g,this.BF=h,this.BG=v,this.HR=f,this.drug=p}))},"4705":function(e,t,a){a.r(t),a.d(t,{"default":function(){return m}});var n=a(6252),i=a(2262),r=a(1963),u=a(7945),o=a(9830),l=a(6898),d=a(6349),c={"name":"editDrugPage"},s=Object.assign(c,{"setup":function setup(e){var t=(0,i.iH)((0,o.r)("drugs")),a=(0,i.qj)({"dosage":"","drugName":"","dose":["口服","含服","吸入","外用","滴眼","滴耳","静脉注射"],"form":["片","胶囊","糖浆","散","滴"],"doseChecked":"口服","formChecked":"片","intervalText":"30分钟","intervalSelected":"00:30","timeSelected":(0,l.Td)(!1),"startDateSelected":(0,l.V5)(),"stopDateSelected":(0,l.V5)()}),c=(0,r.FN)().router.params.index;if(void 0!==c){var s=t.value[c];a.dosage=s.dosage,a.drugName=s.drugName,a.doseChecked=s.dose,a.formChecked=s.form,a.intervalSelected=s.interval,a.timeSelected=s.time,a.startDateSelected=s.startDate,a.stopDateSelected=s.stopDate}function onDoseChange(e){a.doseChecked=a.dose[e.detail.value]}function onFormChange(e){a.formChecked=a.form[e.detail.value]}function onTimeChange(e){a.timeSelected=e.detail.value}function onStartDateChange(e){a.startDateSelected=e.detail.value}function onIntervalChange(e){var t=e.detail.value.split(":")[0],n=e.detail.value.split(":")[1],i="";"0"==t[0]&&(t=t[1]),"0"!=t&&(i+="".concat(t,"小时")),"0"==n[0]&&(n=n[1]),i+="".concat(n,"分钟"),a.intervalText=i}function onDrugNameChange(e){a.drugName=e}function onStopDateChange(e){a.stopDateSelected=e.detail.value}function onDosageChange(e){a.dosage=e}function editDrug(){var e=new d.By(Date.now(),a.drugName,a.dosage,a.formChecked,a.doseChecked,a.intervalSelected,a.timeSelected,a.startDateSelected,a.stopDateSelected);t.value[c]=e,console.log(t.value),u.ZP.navigateBack()}return function(e,t){var r=(0,n.up)("View"),u=(0,n.up)("AtInput"),o=(0,n.up)("AtListItem"),l=(0,n.up)("Picker"),d=(0,n.up)("AtList"),c=(0,n.up)("AtButton");return(0,n.wg)(),(0,n.j4)(r,{"class":"root-editdrug"},{"default":(0,n.w5)((function(){return[(0,n.Wm)(r,{"class":"headline"},{"default":(0,n.w5)((function(){return[(0,n.Uk)(" 编辑药物 ")]})),"_":1}),(0,n.Wm)(r,{"class":"panel"},{"default":(0,n.w5)((function(){return[(0,n.Wm)(r,{"class":"panel-title"},{"default":(0,n.w5)((function(){return[(0,n.Uk)("药物信息")]})),"_":1}),(0,n.Wm)(d,null,{"default":(0,n.w5)((function(){return[(0,n.Wm)(u,{"style":{"margin-left":"12px"},"name":"value1","title":"药物名称","type":"text","placeholder":"请输入药物名称","value":(0,i.SU)(a).drugName,"onChange":onDrugNameChange},null,8,["value"]),(0,n.Wm)(l,{"mode":"selector","range":(0,i.SU)(a).dose,"onChange":onDoseChange},{"default":(0,n.w5)((function(){return[(0,n.Wm)(o,{"title":"服用方式","extraText":(0,i.SU)(a).doseChecked,"hasBorder":""},null,8,["extraText"])]})),"_":1},8,["range"]),(0,n.Wm)(u,{"title":"服药剂量","type":"number","placeholder":"请输入数字","value":(0,i.SU)(a).dosage,"onChange":onDosageChange},null,8,["value"]),(0,n.Wm)(l,{"mode":"selector","range":(0,i.SU)(a).form,"onChange":onFormChange},{"default":(0,n.w5)((function(){return[(0,n.Wm)(o,{"title":"药物剂型","extraText":(0,i.SU)(a).formChecked,"hasBorder":""},null,8,["extraText"])]})),"_":1},8,["range"])]})),"_":1})]})),"_":1}),(0,n.Wm)(r,{"class":"panel"},{"default":(0,n.w5)((function(){return[(0,n.Wm)(r,{"class":"panel-title"},{"default":(0,n.w5)((function(){return[(0,n.Uk)("服药信息")]})),"_":1}),(0,n.Wm)(d,{"hasBorder":""},{"default":(0,n.w5)((function(){return[(0,n.Wm)(l,{"mode":"time","value":(0,i.SU)(a).intervalSelected,"onChange":onIntervalChange},{"default":(0,n.w5)((function(){return[(0,n.Wm)(o,{"title":"服药间隔","extraText":(0,i.SU)(a).intervalText,"hasBorder":""},null,8,["extraText"])]})),"_":1},8,["value"]),(0,n.Wm)(l,{"mode":"date","value":(0,i.SU)(a).startDateSelected,"onChange":onStartDateChange},{"default":(0,n.w5)((function(){return[(0,n.Wm)(o,{"title":"开始服用日期","extraText":(0,i.SU)(a).startDateSelected,"hasBorder":""},null,8,["extraText"])]})),"_":1},8,["value"]),(0,n.Wm)(l,{"mode":"time","value":(0,i.SU)(a).timeSelected,"onChange":onTimeChange},{"default":(0,n.w5)((function(){return[(0,n.Wm)(o,{"title":"开始服用时间","extraText":(0,i.SU)(a).timeSelected,"hasBorder":""},null,8,["extraText"])]})),"_":1},8,["value"]),(0,n.Wm)(l,{"mode":"date","value":(0,i.SU)(a).stopDateSelected,"onChange":onStopDateChange},{"default":(0,n.w5)((function(){return[(0,n.Wm)(o,{"title":"停药日期","extraText":(0,i.SU)(a).stopDateSelected,"hasBorder":""},null,8,["extraText"])]})),"_":1},8,["value"])]})),"_":1})]})),"_":1}),(0,n.Wm)(c,{"class":"save-btn","type":"primary","size":"normal","onClick":editDrug},{"default":(0,n.w5)((function(){return[(0,n.Uk)(" 完成 ")]})),"_":1})]})),"_":1})}}});var m=s}}]);